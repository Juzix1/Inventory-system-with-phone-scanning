@* LineChartStat.razor *@
@using BlazorBootstrap

<div class="col-lg-auto mb-3">
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">@Title</h5>
        </div>
        <div class="card-body" style="min-height: 400px;">
            <LineChart @ref="chart" Height="300" Width="890" />
        </div>
    </div>
</div>

@code {
    [Parameter]
    public string Title { get; set; } = "Chart";
    
    [Parameter]
    public ChartData? ChartData { get; set; }
    
    [Parameter]
    public LineChartOptions? ChartOptions { get; set; }
    
    private LineChart chart = default!;
    private bool initialized = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        // Inicjalizuj wykres tylko raz, gdy dane są dostępne
        if (!initialized && ChartData != null && ChartOptions != null)
        {
            try
            {
                await chart.InitializeAsync(ChartData, ChartOptions);
                initialized = true;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Chart initialization error in {Title}: {ex.Message}");
            }
        }
    }
}